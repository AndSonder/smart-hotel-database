## 需求分析

### 数据需求

#### 数据字典

**用户数据字典表**

| 字段名   | 数据类型 |           作用           |                             备注                             |
| -------- | :------: | :----------------------: | :----------------------------------------------------------: |
| wecharid | VARCHAR  |     唯一标识用户身份     | 此字段值是在微信接口服务获取的固定字符串，为避免字符串长度标准更改，故采用变长数据类型记录 |
| name     | VARCHAR  |       记录用户姓名       | 考虑不同用户的国籍、名族，有概率出现名字过长的情况，故采用变长数据类型记录 |
| sex      |   CHAR   |       记录用户性别       |      用户性别记录只有男和女，故采用固定长度数据类型记录      |
| id_card  | VARCHAR  |   记录用户登记证件号码   | 考虑到不是所有用户都是持身份证预订房间，酒店入住有效证件包括中华人民共和国居民身份证、港澳居民来往内地通行证、台湾居民来往大陆通行证和中华人民共和国护照。故采用变长数据类型记录 |
| phone    | VARCHAR  | 记录用户联系方式——手机号 |   考虑到用户手机号的长度不全是11位，故采用变长数据类型记录   |
| level    |   INT    |       记录用户等级       |  考虑到管理系统服务对象身份多阶，故设立等级属性区别用户身份  |

**管理员数据字典表**

| 字段名   | 数据类型 |           作用           |                             备注                             |
| -------- | :------: | :----------------------: | :----------------------------------------------------------: |
| id       |   INT    |        标识管理员        | 此字段表示拥有登录网页端管理后台权限的管理员，每个拥有上述权限的管理员都应有对应的id |
| username | VARCHAR  |      记录管理员账号      |      考虑到管理员账号字符串长度，故采用变长数据类型记录      |
| password | VARCHAR  |    记录管理员账号密码    | 考虑到管理员账号密码字符种类不定、长度不定，故采用变长数据类型记录 |
| token    | VARCHAR  | 对管理员账号进行身份验证 |      此字段用作管理员的身份验证，可以唯一标识管理员身份      |

**人脸数据字典表**

| 字段名   | 数据类型 |         作用         |                             备注                             |
| -------- | :------: | :------------------: | :----------------------------------------------------------: |
| wecharid | VARCHAR  |   唯一标识用户身份   | 此字段值是在微信接口服务获取的固定字符串，为避免字符串长度标准更改，故采用变长数据类型记录 |
| face_id  | VARCHAR  | 唯一标识用户人脸信息 | 此字段值是通过人脸算法识别后生成的固定字符串，为避免算法更导致字符串长度标准更改，故采用变长数据类型记录 |

**订单数据字典表**

|  字段名   | 数据类型 |         作用         |                             备注                             |
| :-------: | :------: | :------------------: | :----------------------------------------------------------: |
|    id     |   INT    |     记录订单编号     |           每个订单都应有对应的编号唯一标识订单本身           |
|  deposit  |   INT    |     记录订单订金     | 为避免恶意预订、浪费酒店资源，用户在订房需支付一定数额的订金 |
|  pmoney   |   INT    |   记录订单应付金额   |       统计用户在酒店的总消费金额，包括订金、客房服务等       |
|   scid    | DATETIME | 记录用户预定入住时间 | 用户在入住前预约订单时填写的预入住时间，配合预离开时间方便为用户进行房间推荐、计算订单定金、调整其他用户可入住时间段 |
|    sgo    | DATETIME | 记录用户预定离开时间 | 用户在入住前预约订单时填写的预离开时间，配合预入住时间方便为用户进行房间推荐和计算订单定金、调整其他用户可入住时间段 |
|    cid    | DATETIME | 记录用户实际入住时间 | 考虑到用户大概率不会按时入住，可能会提前或延期，所以要单独记录用户的实际入住时间，配合结账离开时间方便为其他用户进行房间推荐和计算订单应付金额、调整其他用户可入住时间段 |
|    go     | DATETIME | 记录用户结账离开时间 | 考虑到用户可能不会按时离开，可能会提前、延期或主动增加入住时长，所以要单独记录用户的结账离开时间，配合实际入住时间方便为其他用户进行房间推荐和计算订单应付金额、调整其他用户可入住时间段 |
| wecharid  | VARCHAR  |   唯一标识用户身份   | 此字段值是在微信接口服务获取的固定字符串，为避免字符串长度标准更改，故采用变长数据类型记录 |
|  room_id  |   INT    |       标识房间       |                     为记录订单对应的房间                     |
| id_status |   INT    |     记录订单状态     | 订单根据用户的不同操作会有不同的状态，包括已过期、进行中和已取消 |

**房间数据字典表**

|   字段名    | 数据类型 |       作用       |                             备注                             |
| :---------: | :------: | :--------------: | :----------------------------------------------------------: |
|     id      |   INT    |     标识房间     |                 每个房间要有房间编号标识自身                 |
|    rtype    | VARCHAR  |   记录房间类型   | 酒店内的房间类型不全相同，需要明示房间类型以便酒店客户预定时选择，亦方便酒店工作人员管理 |
|   bedtype   | VARCHAR  |   记录房间床型   | 不同房间类型的床型不同，需要明示房间床型以便酒店客户预定时选择，亦方便酒店工作人员管理 |
|   maxnum    |   INT    | 记录房间人数上限 | 不同类型、床型的房间的居住人数上限不同，需要明示房间可入住人数上限以便酒店客户预定时选择，亦方便酒店工作人员管理 |
|    area     | VARCHAR  |   记录房间面积   | 不同类型、床型的房间的面积不同，需要明示房间面积以便酒店客户预定时选择，亦方便酒店工作人员管理 |
|    rwin     | tinyint  | 记录房间窗户有无 | 因为位置和设计问题，有的房间并无窗户，需要明示房间是否有窗以便酒店客户预定时选择，亦方便酒店工作人员管理 |
|    rlock    |   INT    |  记录房间锁状态  | 房间的锁会因各种因素有不同的状态，包括已锁、未锁、锁已损坏，房间未配备锁 |
|    money    |   INT    |   记录房间单价   | 房间的单价虽然可变，但属于房间的固有属性，需要明示房间单价以便酒店客户预定时选择，亦方便酒店工作人员管理 |
| temperature |  FLOAT   |   记录房间温度   | 房间的温度在酒店客户入住后会被酒店客户和酒店工作人员查看到，被酒店客户查看方便调控房间内温度，被酒店工作人员查看方便排查房间内的异常情况；因为数据会精确到小数点后，故采用浮点类型 |
|  humidity   |  FLOAT   |   记录房间湿度   | 房间的温度在酒店客户入住后会被酒店客户和酒店工作人员查看到，被酒店客户查看方便调控房间内湿度，被酒店工作人员查看方便排查房间内的异常情况；因为数据会精确到小数点后，故采用浮点类型 |

**智能空调数据字典表**

| 字段名  | 数据类型 |       作用       |                             备注                             |
| :-----: | :------: | :--------------: | :----------------------------------------------------------: |
|   id    |   INT    |     标识空调     | 每个空调要有自己的标识，考虑到房间硬件设施更换问题，故空调表示不设在房间属性内，单独标识 |
| status  |   INT    |   记录空调状态   |           空调因各种因素有不同的状态，开、关、损坏           |
| air_tmp |  FLOAT   | 记录空调当前温度 | 空调当前温度应被酒店客户和酒店工作人员查看到，被酒店客户查看方便调控空调温度，被酒店工作人员查看方便排查空调异常问题并处理；因为数据会精确到小数点后，故采用浮点类型 |
| room_id |   INT    | 记录对应的房间号 |    能正常使用的设备应被安装在指定房间，故应记录对应房间号    |

**智能灯数据信息表**

|   字段名    | 数据类型 |       作用       |                             备注                             |
| :---------: | :------: | :--------------: | :----------------------------------------------------------: |
|     id      |   INT    |     标识空调     | 每个灯要有自己的标识，考虑到房间硬件设施更换问题，故空调表示不设在房间属性内，单独标识 |
|   status    |   INT    |   记录空调状态   |            灯因各种因素有不同的状态，开、关、损坏            |
| light_value |   INT    | 记录空调当前温度 | 空调当前亮度应被酒店客户和酒店工作人员查看到，被酒店客户查看方便调控灯的亮度，被酒店工作人员查看方便排查灯的异常问题并处理 |
|   room_id   |   INT    | 记录对应的房间号 |    能正常使用的设备应被安装在指定房间，故应记录对应房间号    |

**开门记录数据信息表**

|  字段名   | 数据类型 |       作用       |                             备注                             |
| :-------: | :------: | :--------------: | :----------------------------------------------------------: |
|    id     |   INT    |     标识记录     |            每条开门记录都应该有自己的独立编号标识            |
| wecharid  | VARCHAR  | 唯一标识用户身份 | 此字段值是在微信接口服务获取的固定字符串，为避免字符串长度标准更改，故采用变长数据类型记录 |
| open_time | DATETIME |   记录开门时间   | 开门时间应被酒店客户和酒店工作人员查看到，被酒店客户查看到方便记录自己的行为，被酒店工作人员查看到可以记录开门行为，方便后续处理特殊情况，如偷窃事件 |
|  room_id  |   INT    | 记录对应的房间号 |                   每条开门记录对应一道房门                   |

