数据库建表代码：

```sql
show databases ;
show schemas ;
create schema helloworld;

create table smarthotel.user (
    wecharid VARCHAR(100) primary key not null ,
    name VARCHAR(100),
    sex CHAR(50) check ( sex='男' or sex='女' ) ,
    id_card VARCHAR(100) unique ,
    phone VARCHAR(100) unique ,
    level INT not null
)
character set utf8;
# drop table smarthotel.user;

create table smarthotel.admin (
    id INT primary key ,
    username VARCHAR(100) not null ,
    password VARCHAR(100) not null ,
    token VARCHAR(100) not null
)
character set utf8;
# drop table smarthotel.admin;
#设置外键
ALTER TABLE smarthotel.admin
ADD FOREIGN KEY (token)
REFERENCES user(wecharid);
########

create table smarthotel.face_info (
    wecharid VARCHAR(100) primary key not null ,
    face_id VARCHAR(100) not null
)
character set utf8;
# drop table smarthotel.face_info;

create table smarthotel.order (
    id INT primary key not null unique ,
    pmoney INT not null ,
    scid DATETIME not null ,
    sgo DATETIME not null ,
    cid DATETIME,
    go DATETIME,
    wecharid VARCHAR(100) ,
    room_id INT
    #FOREIGN KEY (wecharid) REFERENCES user(wecharid)
)
character set utf8;
# drop table smarthotel.order;
#设置外键
ALTER TABLE smarthotel.order
ADD FOREIGN KEY (wecharid)
REFERENCES user(wecharid);

ALTER TABLE smarthotel.order
ADD FOREIGN KEY (room_id)
REFERENCES room(id);
########

create table smarthotel.room (
    id INT primary key not null unique ,
    money INT not null,
    temperature FLOAT not null ,
    humidity FLOAT not null ,
    rtype CHAR(50) not null
)
character set utf8;
# drop table smarthotel.room;


create table smarthotel.air_conditioning (
    id INT primary key not null unique ,
    status INT check ( status=0 or status=1 ),
    air_tmp FLOAT not null ,
    room_id INT
)
character set utf8;
# drop table smarthotel.air_conditioning;
#设置外键
ALTER TABLE smarthotel.air_conditioning
ADD FOREIGN KEY (room_id)
REFERENCES room(id);
########

create table smarthotel.light (
    id INT primary key not null unique ,
    status INT check ( status=0 or status=1 ),
    light_value FLOAT not null ,
    room_id INT
)
character set utf8;
# drop table smarthotel.light;
#设置外键
ALTER TABLE smarthotel.light
ADD FOREIGN KEY (room_id)
REFERENCES room(id);
########

create table smarthotel.door_opening_record (
    id INT primary key not null unique ,
    wecharid VARCHAR(100) not null ,
    open_time DATETIME not null ,
    room_id INT not null
)
character set utf8;
# drop table smarthotel.door_opening_record;
```